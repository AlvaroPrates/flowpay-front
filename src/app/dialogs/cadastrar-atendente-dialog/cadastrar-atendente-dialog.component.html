<div class="dialog-surface">
  <h2 mat-dialog-title>
    <mat-icon>person_add</mat-icon>
    Cadastrar Atendente
  </h2>

  <mat-dialog-content>
    <form [formGroup]="form" class="atendente-form">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nome Completo</mat-label>
        <input matInput formControlName="nome" placeholder="Ex: Ana Silva" autocomplete="off">
        <mat-icon matPrefix>badge</mat-icon>
        @if (form.get('nome')?.hasError('required')) {
          <mat-error>
            Nome é obrigatório
          </mat-error>
        }
        @if (form.get('nome')?.hasError('minlength')) {
          <mat-error>
            Nome deve ter no mínimo 3 caracteres
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Time</mat-label>
        <mat-select formControlName="time" placeholder="Selecione o time">
          @if (form.get('time')?.value) {
            <mat-select-trigger>
              {{ getTimeLabel(form.get('time')?.value) }}
            </mat-select-trigger>
          }
          @for (time of times; track time) {
            <mat-option [value]="time">
              <div class="time-option">
                <mat-icon>group</mat-icon>
                {{ timeLabels[time] }}
              </div>
            </mat-option>
          }
        </mat-select>
        <mat-icon matPrefix>groups</mat-icon>
        @if (form.get('time')?.hasError('required')) {
          <mat-error>
            Time é obrigatório
          </mat-error>
        }
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()" [disabled]="loading">
      Cancelar
    </button>

    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="loading || form.invalid">
      @if (!loading) {
        <mat-icon>person_add</mat-icon>
      }
      @if (loading) {
        <mat-icon class="spinner">hourglass_empty</mat-icon>
      }
      {{ loading ? 'Cadastrando...' : 'Cadastrar' }}
    </button>
  </mat-dialog-actions>
</div>